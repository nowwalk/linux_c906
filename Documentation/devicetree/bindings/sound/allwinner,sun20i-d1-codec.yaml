# SPDX-License-Identifier: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/sound/allwinner,sun20i-d1-codec.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Allwinner D1 Codec Device Tree Bindings

maintainers:
  - Samuel Holland <samuel@sholland.org>

properties:
  "#address-cells": true
  "#size-cells": true

  "#sound-dai-cells":
    const: 0

  compatible:
    items:
      - enum:
          - allwinner,sun20i-d1-codec
      - const: simple-mfd
      - const: syscon

  reg:
    maxItems: 1

  ranges: true

  interrupts:
    maxItems: 1

  clocks:
    items:
      - description: Bus Clock
      - description: ADC Clock
      - description: DAC Clock
      - description: HOSC Clock (for jack detection and ramp)
      - description: LOSC Clock (for jack detection and ramp)

  clock-names:
    items:
      - const: bus
      - const: adc
      - const: dac
      - const: hosc
      - const: losc

  dmas:
    items:
      - description: RX DMA Channel
      - description: TX DMA Channel

  dma-names:
    items:
      - const: rx
      - const: tx

  resets:
    maxItems: 1

  avcc-supply:
    description: Power supply for the analog domain

  hpvcc-supply:
    description: Power supply for the headphone charge pump

  hp-det-gpio:
    maxItems: 1
    description: GPIO to enable the external amplifier

  aux-devs:
    $ref: simple-card.yaml#/definitions/aux-devs

  pin-switches:
    $ref: simple-card.yaml#/definitions/pin-switches

  routing:
    $ref: simple-card.yaml#/definitions/routing

  widgets:
    $ref: simple-card.yaml#/definitions/widgets

patternProperties:
  "^regulators@[a-z0-9]+":
    $ref: /schemas/regulator/allwinner,sun20i-d1-analog-ldos.yaml#

required:
  - "#sound-dai-cells"
  - compatible
  - reg
  - interrupts
  - clocks
  - clock-names
  - dmas
  - dma-names
  - resets

additionalProperties: false

...
